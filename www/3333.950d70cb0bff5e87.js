(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3333],{3333:(G,v,s)=>{"use strict";s.r(v),s.d(v,{VoiceRecorderWeb:()=>U});var N=s(2726),d=s(5861),E=s(3892);const L=()=>new Error("FAILED_TO_RECORD"),_=()=>new Error("RECORDING_HAS_NOT_STARTED"),M=()=>new Error("FAILED_TO_FETCH_RECORDING"),F=["audio/aac","audio/webm;codecs=opus","audio/mp4","audio/webm","audio/ogg;codecs=opus"],m=()=>new Promise(()=>{});class p{constructor(){this.mediaRecorder=null,this.chunks=[],this.pendingResult=m()}static canDeviceVoiceRecord(){return(0,d.Z)(function*(){var a;return null==(null===(a=null==navigator?void 0:navigator.mediaDevices)||void 0===a?void 0:a.getUserMedia)||null==p.getSupportedMimeType()?{value:!1}:{value:!0}})()}startRecording(){var a=this;return(0,d.Z)(function*(){if(null!=a.mediaRecorder)throw new Error("ALREADY_RECORDING");if(!(yield p.canDeviceVoiceRecord()).value)throw new Error("DEVICE_CANNOT_VOICE_RECORD");if(!(yield p.hasAudioRecordingPermission().catch(()=>({value:!0}))).value)throw new Error("MISSING_PERMISSION");return navigator.mediaDevices.getUserMedia({audio:!0}).then(a.onSuccessfullyStartedRecording.bind(a)).catch(a.onFailedToStartRecording.bind(a))})()}stopRecording(){var a=this;return(0,d.Z)(function*(){if(null==a.mediaRecorder)throw _();try{return a.mediaRecorder.stop(),a.mediaRecorder.stream.getTracks().forEach(l=>l.stop()),a.pendingResult}catch{throw M()}finally{a.prepareInstanceForNextOperation()}})()}static hasAudioRecordingPermission(){return(0,d.Z)(function*(){return navigator.permissions.query({name:"microphone"}).then(a=>({value:"granted"===a.state})).catch(()=>{throw new Error("COULD_NOT_QUERY_PERMISSION_STATUS")})})()}static requestAudioRecordingPermission(){return(0,d.Z)(function*(){return(yield p.hasAudioRecordingPermission().catch(()=>({value:!1}))).value?{value:!0}:navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>({value:!0})).catch(()=>({value:!1}))})()}pauseRecording(){if(null==this.mediaRecorder)throw _();return"recording"===this.mediaRecorder.state?(this.mediaRecorder.pause(),Promise.resolve({value:!0})):Promise.resolve({value:!1})}resumeRecording(){if(null==this.mediaRecorder)throw _();return"paused"===this.mediaRecorder.state?(this.mediaRecorder.resume(),Promise.resolve({value:!0})):Promise.resolve({value:!1})}getCurrentStatus(){return Promise.resolve(null==this.mediaRecorder?{status:"NONE"}:"recording"===this.mediaRecorder.state?{status:"RECORDING"}:"paused"===this.mediaRecorder.state?{status:"PAUSED"}:{status:"NONE"})}static getSupportedMimeType(){if(null==(null==MediaRecorder?void 0:MediaRecorder.isTypeSupported))return null;const a=F.find(l=>MediaRecorder.isTypeSupported(l));return null!=a?a:null}onSuccessfullyStartedRecording(a){var l=this;return this.pendingResult=new Promise((P,S)=>{this.mediaRecorder=new MediaRecorder(a),this.mediaRecorder.onerror=()=>{this.prepareInstanceForNextOperation(),S(L())},this.mediaRecorder.onstop=(0,d.Z)(function*(){const T=p.getSupportedMimeType();if(null==T)return l.prepareInstanceForNextOperation(),void S(M());const D=new Blob(l.chunks,{type:T});if(D.size<=0)return l.prepareInstanceForNextOperation(),void S(new Error("EMPTY_RECORDING"));const j=yield p.blobToBase64(D),Z=yield(0,E.Z)(D);l.prepareInstanceForNextOperation(),P({value:{recordDataBase64:j,mimeType:T,msDuration:1e3*Z}})}),this.mediaRecorder.ondataavailable=T=>this.chunks.push(T.data),this.mediaRecorder.start()}),{value:!0}}onFailedToStartRecording(){throw this.prepareInstanceForNextOperation(),L()}static blobToBase64(a){return new Promise(l=>{const P=new FileReader;P.onloadend=()=>{const S=String(P.result),T=S.split("base64,");l((T.length>1?T[1]:S).trim())},P.readAsDataURL(a)})}prepareInstanceForNextOperation(){if(null!=this.mediaRecorder&&"recording"===this.mediaRecorder.state)try{this.mediaRecorder.stop()}catch{}this.pendingResult=m(),this.mediaRecorder=null,this.chunks=[]}}class U extends N.Uw{constructor(){super(...arguments),this.voiceRecorderInstance=new p}canDeviceVoiceRecord(){return p.canDeviceVoiceRecord()}hasAudioRecordingPermission(){return p.hasAudioRecordingPermission()}requestAudioRecordingPermission(){return p.requestAudioRecordingPermission()}startRecording(){return this.voiceRecorderInstance.startRecording()}stopRecording(){return this.voiceRecorderInstance.stopRecording()}pauseRecording(){return this.voiceRecorderInstance.pauseRecording()}resumeRecording(){return this.voiceRecorderInstance.resumeRecording()}getCurrentStatus(){return this.voiceRecorderInstance.getCurrentStatus()}}},3892:(G,v,s)=>{"use strict";var d=s(7957);v.Z=function h(O){return g.apply(this,arguments)};var E=d(s(6780)),c=d(s(5877));function g(){return(g=(0,c.default)(E.default.mark(function O(f){var i,L;return E.default.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return i=document.createElement("video"),L=new Promise(function(_,M){i.addEventListener("loadedmetadata",function(){i.duration===1/0?(i.currentTime=Number.MAX_SAFE_INTEGER,i.ontimeupdate=function(){i.ontimeupdate=null,_(i.duration),i.currentTime=0}):_(i.duration)}),i.onerror=function(k){return M(k.target.error)}}),i.src="string"==typeof f||f instanceof String?f:window.URL.createObjectURL(f),I.abrupt("return",L);case 4:case"end":return I.stop()}},O)}))).apply(this,arguments)}},7267:G=>{var v=function(s){"use strict";var c,N=Object.prototype,d=N.hasOwnProperty,E=Object.defineProperty||function(r,e,t){r[e]=t.value},h="function"==typeof Symbol?Symbol:{},g=h.iterator||"@@iterator",O=h.asyncIterator||"@@asyncIterator",f=h.toStringTag||"@@toStringTag";function i(r,e,t){return Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{i({},"")}catch{i=function(e,t,o){return e[t]=o}}function L(r,e,t,o){var u=Object.create((e&&e.prototype instanceof p?e:p).prototype),R=new V(o||[]);return E(u,"_invoke",{value:j(r,t,R)}),u}function I(r,e,t){try{return{type:"normal",arg:r.call(e,t)}}catch(o){return{type:"throw",arg:o}}}s.wrap=L;var _="suspendedStart",M="suspendedYield",k="executing",F="completed",m={};function p(){}function U(){}function A(){}var a={};i(a,g,function(){return this});var l=Object.getPrototypeOf,P=l&&l(l(H([])));P&&P!==N&&d.call(P,g)&&(a=P);var S=A.prototype=p.prototype=Object.create(a);function T(r){["next","throw","return"].forEach(function(e){i(r,e,function(t){return this._invoke(e,t)})})}function D(r,e){function t(u,R,y,b){var w=I(r[u],r,R);if("throw"!==w.type){var W=w.arg,B=W.value;return B&&"object"==typeof B&&d.call(B,"__await")?e.resolve(B.__await).then(function(C){t("next",C,y,b)},function(C){t("throw",C,y,b)}):e.resolve(B).then(function(C){W.value=C,y(W)},function(C){return t("throw",C,y,b)})}b(w.arg)}var o;E(this,"_invoke",{value:function n(u,R){function y(){return new e(function(b,w){t(u,R,b,w)})}return o=o?o.then(y,y):y()}})}function j(r,e,t){var o=_;return function(u,R){if(o===k)throw new Error("Generator is already running");if(o===F){if("throw"===u)throw R;return Q()}for(t.method=u,t.arg=R;;){var y=t.delegate;if(y){var b=Z(y,t);if(b){if(b===m)continue;return b}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if(o===_)throw o=F,t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);o=k;var w=I(r,e,t);if("normal"===w.type){if(o=t.done?F:M,w.arg===m)continue;return{value:w.arg,done:t.done}}"throw"===w.type&&(o=F,t.method="throw",t.arg=w.arg)}}}function Z(r,e){var t=e.method,o=r.iterator[t];if(o===c)return e.delegate=null,"throw"===t&&r.iterator.return&&(e.method="return",e.arg=c,Z(r,e),"throw"===e.method)||"return"!==t&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+t+"' method")),m;var n=I(o,r.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,m;var u=n.arg;return u?u.done?(e[r.resultName]=u.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,m):u:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function q(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function Y(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function V(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(q,this),this.reset(!0)}function H(r){if(r){var e=r[g];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var t=-1,o=function n(){for(;++t<r.length;)if(d.call(r,t))return n.value=r[t],n.done=!1,n;return n.value=c,n.done=!0,n};return o.next=o}}return{next:Q}}function Q(){return{value:c,done:!0}}return U.prototype=A,E(S,"constructor",{value:A,configurable:!0}),E(A,"constructor",{value:U,configurable:!0}),U.displayName=i(A,f,"GeneratorFunction"),s.isGeneratorFunction=function(r){var e="function"==typeof r&&r.constructor;return!!e&&(e===U||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,A):(r.__proto__=A,i(r,f,"GeneratorFunction")),r.prototype=Object.create(S),r},s.awrap=function(r){return{__await:r}},T(D.prototype),i(D.prototype,O,function(){return this}),s.AsyncIterator=D,s.async=function(r,e,t,o,n){void 0===n&&(n=Promise);var u=new D(L(r,e,t,o),n);return s.isGeneratorFunction(e)?u:u.next().then(function(R){return R.done?R.value:u.next()})},T(S),i(S,f,"Generator"),i(S,g,function(){return this}),i(S,"toString",function(){return"[object Generator]"}),s.keys=function(r){var e=Object(r),t=[];for(var o in e)t.push(o);return t.reverse(),function n(){for(;t.length;){var u=t.pop();if(u in e)return n.value=u,n.done=!1,n}return n.done=!0,n}},s.values=H,V.prototype={constructor:V,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(Y),!r)for(var e in this)"t"===e.charAt(0)&&d.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function t(b,w){return u.type="throw",u.arg=r,e.next=b,w&&(e.method="next",e.arg=c),!!w}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],u=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var R=d.call(n,"catchLoc"),y=d.call(n,"finallyLoc");if(R&&y){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(R){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!y)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(r,e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc<=this.prev&&d.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===r||"continue"===r)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var u=n?n.completion:{};return u.type=r,u.arg=e,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(u)},complete:function(r,e){if("throw"===r.type)throw r.arg;return"break"===r.type||"continue"===r.type?this.next=r.arg:"return"===r.type?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):"normal"===r.type&&e&&(this.next=e),m},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===r)return this.complete(t.completion,t.afterLoc),Y(t),m}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===r){var o=t.completion;if("throw"===o.type){var n=o.arg;Y(t)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,t){return this.delegate={iterator:H(r),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=c),m}},s}(G.exports);try{regeneratorRuntime=v}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=v:Function("r","regeneratorRuntime = r")(v)}},5877:G=>{function v(N,d,E,c,h,g,O){try{var f=N[g](O),i=f.value}catch(L){return void E(L)}f.done?d(i):Promise.resolve(i).then(c,h)}G.exports=function s(N){return function(){var d=this,E=arguments;return new Promise(function(c,h){var g=N.apply(d,E);function O(i){v(g,c,h,O,f,"next",i)}function f(i){v(g,c,h,O,f,"throw",i)}O(void 0)})}}},7957:G=>{G.exports=function v(s){return s&&s.__esModule?s:{default:s}}},6780:(G,v,s)=>{G.exports=s(7267)}}]);